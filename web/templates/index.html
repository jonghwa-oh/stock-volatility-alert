{% extends "base.html" %}

{% block title %}ëŒ€ì‹œë³´ë“œ - ì£¼ì‹ ì•Œë¦¼{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- í—¤ë” -->
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-2xl font-bold">ğŸ“Š ì¢…ëª© ë¶„ì„</h1>
            <p class="text-slate-400 text-sm mt-1">ì¡°íšŒ: {{ now.strftime('%Y-%m-%d %H:%M') }} (ê° ì¢…ëª©ë³„ ê¸°ì¤€ì¼ ì°¸ê³ )</p>
        </div>
        <a href="{{ url_for('stocks.add_stock') }}"
           class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-xl transition-colors">
            <span>â•</span>
            <span class="hidden sm:inline">ì¢…ëª© ì¶”ê°€</span>
        </a>
    </div>
    
    <!-- ì¢…ëª© ì¹´ë“œ ê·¸ë¦¬ë“œ -->
    {% if stocks %}
    <div class="grid gap-4 sm:grid-cols-2">
        {% for stock in stocks %}
        <div class="bg-slate-800 rounded-2xl p-5 border border-slate-700 card-hover">
            <!-- ì¢…ëª© í—¤ë” -->
            <div class="flex items-start justify-between mb-4">
                <div>
                    <div class="flex items-center gap-2">
                        <span class="text-xl">{{ 'ğŸ‡°ğŸ‡·' if stock.country == 'KR' else 'ğŸ‡ºğŸ‡¸' }}</span>
                        <h3 class="font-bold text-lg">{{ stock.name }}</h3>
                    </div>
                    <p class="text-slate-400 text-sm">{{ stock.ticker }}</p>
                </div>
                
                {% if stock.success %}
                <div class="text-right">
                    <p class="text-2xl font-bold">
                        {% if stock.country == 'KR' %}
                        {{ "{:,.0f}".format(stock.current_price) }}ì›
                        {% else %}
                        ${{ "{:,.2f}".format(stock.current_price) }}
                        {% endif %}
                    </p>
                    <p class="text-sm text-slate-400">
                        {% if stock.data_date %}
                        {{ stock.data_date }}{% if stock.country == 'US' %} (ë¯¸êµ­){% endif %} ì¢…ê°€
                        {% else %}
                        í˜„ì¬ê°€
                        {% endif %}
                    </p>
                </div>
                {% endif %}
            </div>
            
            {% if stock.success %}
            <!-- ëª©í‘œê°€ ì •ë³´ -->
            <div class="space-y-3 mb-4">
                <!-- 0.5Ïƒ -->
                <div class="flex items-center justify-between p-3 bg-slate-700/50 rounded-xl">
                    <div class="flex items-center gap-2">
                        <span class="w-8 h-8 bg-yellow-500/20 text-yellow-400 rounded-lg flex items-center justify-center text-sm font-bold">0.5</span>
                        <span class="text-sm text-slate-300">í…ŒìŠ¤íŠ¸ ë§¤ìˆ˜</span>
                    </div>
                    <div class="text-right">
                        <p class="font-medium">
                            {% if stock.country == 'KR' %}
                            {{ "{:,.0f}".format(stock.target_05x) }}ì›
                            {% else %}
                            ${{ "{:,.2f}".format(stock.target_05x) }}
                            {% endif %}
                        </p>
                        <p class="text-xs text-red-400">â–¼{{ "{:.1f}".format(stock.drop_05x) }}%</p>
                    </div>
                </div>
                
                <!-- 1Ïƒ -->
                <div class="flex items-center justify-between p-3 bg-slate-700/50 rounded-xl">
                    <div class="flex items-center gap-2">
                        <span class="w-8 h-8 bg-blue-500/20 text-blue-400 rounded-lg flex items-center justify-center text-sm font-bold">1Ïƒ</span>
                        <span class="text-sm text-slate-300">1ì°¨ ë§¤ìˆ˜</span>
                    </div>
                    <div class="text-right">
                        <p class="font-medium">
                            {% if stock.country == 'KR' %}
                            {{ "{:,.0f}".format(stock.target_1x) }}ì›
                            {% else %}
                            ${{ "{:,.2f}".format(stock.target_1x) }}
                            {% endif %}
                        </p>
                        <p class="text-xs text-red-400">â–¼{{ "{:.1f}".format(stock.drop_1x) }}%</p>
                    </div>
                </div>
                
                <!-- 2Ïƒ -->
                <div class="flex items-center justify-between p-3 bg-slate-700/50 rounded-xl">
                    <div class="flex items-center gap-2">
                        <span class="w-8 h-8 bg-purple-500/20 text-purple-400 rounded-lg flex items-center justify-center text-sm font-bold">2Ïƒ</span>
                        <span class="text-sm text-slate-300">2ì°¨ ë§¤ìˆ˜</span>
                    </div>
                    <div class="text-right">
                        <p class="font-medium">
                            {% if stock.country == 'KR' %}
                            {{ "{:,.0f}".format(stock.target_2x) }}ì›
                            {% else %}
                            ${{ "{:,.2f}".format(stock.target_2x) }}
                            {% endif %}
                        </p>
                        <p class="text-xs text-red-400">â–¼{{ "{:.1f}".format(stock.drop_2x) }}%</p>
                    </div>
                </div>
            </div>
            
            <!-- ë³€ë™ì„± í‘œì‹œ -->
            <div class="flex items-center justify-between text-sm text-slate-400 mb-4">
                <span>ì¼ì¼ ë³€ë™ì„±</span>
                <span class="font-medium text-slate-200">{{ "{:.2f}".format(stock.volatility) }}%</span>
            </div>
            
            <!-- ì°¨íŠ¸ ë§í¬ -->
            {% if stock.chart_path %}
            <a href="{{ url_for('stocks.view_chart', ticker=stock.ticker) }}"
               class="block w-full py-3 text-center bg-slate-700 hover:bg-slate-600 rounded-xl transition-colors">
                ğŸ“ˆ ì°¨íŠ¸ ë³´ê¸°
            </a>
            {% endif %}
            
            {% else %}
            <!-- ë¶„ì„ ì‹¤íŒ¨ -->
            <div class="text-center py-8 text-slate-500">
                <p class="text-3xl mb-2">âš ï¸</p>
                <p>ë¶„ì„ ë°ì´í„° ì—†ìŒ</p>
                <p class="text-sm">{{ stock.error or 'ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' }}</p>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- ë¹ˆ ìƒíƒœ -->
    <div class="text-center py-16">
        <div class="text-6xl mb-4">ğŸ“­</div>
        <h2 class="text-xl font-bold mb-2">ë“±ë¡ëœ ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤</h2>
        <p class="text-slate-400 mb-6">ê´€ì‹¬ ì¢…ëª©ì„ ì¶”ê°€í•˜ì—¬ ëª¨ë‹ˆí„°ë§ì„ ì‹œì‘í•˜ì„¸ìš”</p>
        <a href="{{ url_for('stocks.add_stock') }}"
           class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl transition-colors">
            â• ì¢…ëª© ì¶”ê°€í•˜ê¸°
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

